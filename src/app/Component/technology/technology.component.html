@if (isLoading) {
<div class="loading-container" role="status" aria-label="Loading projects">
  <div class="spinner-border text-primary" aria-hidden="true"></div>
  <span class="visually-hidden">Loading...</span>
</div>
} @else if (error) {
<div class="alert alert-danger" role="alert">
  {{ error }}
</div>
} @else {
<div class="accordion" id="projectAccordion">
  @for (company of projectData.company; track $index) {
  <section class="accordion-item" [attr.aria-label]="company.companyName + ' projects'">
    <h2 class="accordion-header" [id]="'heading' + $index">
      <button class="accordion-button" type="button" data-bs-toggle="collapse" [attr.data-bs-target]="'#collapse' + $index" [attr.aria-expanded]="$index === 0" [attr.aria-controls]="'collapse' + $index">
        <span class="company-name">{{ company.companyName }}</span>
        <span class="duration" aria-label="Duration">{{ company.duration }}</span>
      </button>
    </h2>
    <div [id]="'collapse' + $index" class="accordion-collapse collapse" [class.show]="$index === 0" [attr.aria-labelledby]="'heading' + $index" data-bs-parent="#projectAccordion">
      <div class="accordion-body">
        @for (project of company.projects; track $index) {
        <article class="project-card col shadow-sm" [attr.aria-label]="'Project: ' + project.projectName">
          <div class="card mt-1">
            <div class="card-body">
              <h3 class="card-title h5">{{ project.projectName }}</h3>
              <div class="mt-3 technologies">
                <h4 class="h6">Technologies used:</h4>
                <code class="tech-stack">{{ project.technologiesUsed }}</code>
              </div>
              <div class="mt-3 roles">
                <h4 class="h6">Role:</h4>
                <code class="role-description">{{ project.role }}</code>
              </div>
              <div class="mt-3 responsibilities">
                <h4 class="h6">Responsibilities:</h4>
                <ul class="list-unstyled" role="list">
                  @for (responsibility of project.responsibilities; track $index) {
                  <li class="responsibility-item">
                    <i class="bi bi-check2-circle" aria-hidden="true"></i>
                    {{ responsibility }}
                  </li>
                  }
                </ul>
              </div>
              @if (project.achievements) {
              <div class="mt-3 achievements">
                <h4 class="h6">Achievements:</h4>
                <code class="achievement-text">{{ project.achievements }}</code>
              </div>
              }
            </div>
          </div>
        </article>
        }
      </div>
    </div>
  </section>
  }
</div>
}